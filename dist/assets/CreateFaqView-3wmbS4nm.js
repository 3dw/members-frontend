import{d as v,h as u,i as q,E as p,G as c,a as n,b as a,g as k,l,s as y,D as b,p as m,e as w,o as i,_ as I}from"./index-B_ipqcop.js";const F=v({name:"CreateFaqView",props:{uid:{type:String,required:!0}},setup(){const t=c(),e=u({id:"",category:"",question:"",answer:""}),d=u(!1);return q(async()=>{try{const s=t.params.id,r=(await p.get("https://members-backend.alearn13994229.workers.dev/api/Faq")).data;console.log(s),console.log(r);const o=r.find(g=>g.id===parseInt(s));o&&(e.value=o)}catch(s){console.error("獲取FAQ資料失敗:",s)}}),{faqItem:e,uploading:d}},methods:{toggleLogin(){this.$emit("toggleLogin")},async createFaq(){if(this.faqItem.category===""){alert("請選擇類別");return}if(this.faqItem.question===""){alert("請輸入問題");return}if(this.faqItem.answer===""){alert("請輸入回答");return}try{this.uploading=!0,await p.post("https://members-backend.alearn13994229.workers.dev/create/faq",{category:this.faqItem.category,question:this.faqItem.question,answer:this.faqItem.answer,links:"[]"}).then(()=>{this.uploading=!1,alert("上傳成功"),this.goBack()}).catch(t=>{this.uploading=!1,console.error("新增FAQ失敗:",t),alert("上傳失敗")})}catch(t){this.uploading=!1,console.error("新增FAQ失敗:",t),alert("上傳失敗")}},goBack(){this.$router.push("/faq")}}}),V={class:"faq-container"},h={class:"ui container relative"},B={key:0,class:"ui active inverted dimmer"},C={key:1,class:"ui form"},$={class:"field"},L={class:"field"},N={class:"field"};function A(t,e,d,s,f,r){return i(),n("div",V,[a("div",h,[t.uploading?(i(),n("div",B,e[6]||(e[6]=[a("div",{class:"ui loader"},null,-1)]))):k("",!0),t.uid?(i(),n("div",C,[a("div",$,[e[8]||(e[8]=a("label",null,"類別：",-1)),l(a("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.faqItem.category=o)},e[7]||(e[7]=[b('<option value="" data-v-5ae3d47d>請選擇類別</option><option value="起步" data-v-5ae3d47d>起步</option><option value="計畫" data-v-5ae3d47d>計畫</option><option value="支持" data-v-5ae3d47d>支持</option><option value="資源" data-v-5ae3d47d>資源</option><option value="其他" data-v-5ae3d47d>其他</option>',6)]),512),[[y,t.faqItem.category]])]),a("div",L,[e[9]||(e[9]=a("label",null,"問題：",-1)),l(a("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.faqItem.question=o),rows:"3"},null,512),[[m,t.faqItem.question]])]),a("div",N,[e[10]||(e[10]=a("label",null,"回答",-1)),l(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.faqItem.answer=o),rows:"20"},null,512),[[m,t.faqItem.answer]])]),a("button",{class:"ui button primary",type:"button",onClick:e[3]||(e[3]=(...o)=>t.createFaq&&t.createFaq(...o))},"上傳"),a("button",{class:"ui button",onClick:e[4]||(e[4]=(...o)=>t.goBack&&t.goBack(...o))},"返回")])):(i(),n("button",{key:2,class:"ui button orange",type:"button",onClick:e[5]||(e[5]=(...o)=>t.toggleLogin&&t.toggleLogin(...o))},e[11]||(e[11]=[a("i",{class:"user icon"},null,-1),w("請先登人以創建問答")])))])])}const Q=I(F,[["render",A],["__scopeId","data-v-5ae3d47d"]]);export{Q as default};
