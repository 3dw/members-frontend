import{d as f,r as d,o as g,a as c,c as r,b as t,F as u,e as h,f as a,t as i,g as p,h as k,_ as b}from"./index-CiOIlwTs.js";const m=f({name:"FaqView",setup(){const e=d([]),s=d(["起步","計畫","支持","資源","其他"]);return g(async()=>{try{const o=await c.get("https://members-backend.alearn13994229.workers.dev/api/Faq");e.value=o.data}catch(o){console.error("獲取FAQ資料失敗:",o)}}),{faqItems:e,categories:s}},computed:{sortedFaqItems(){return this.faqItems.slice().sort((e,s)=>this.categories.indexOf(e.category)-this.categories.indexOf(s.category))}},methods:{fetchFaq(){this.faqItems=[],c.get("https://members-backend.alearn13994229.workers.dev/api/Faq").then(e=>{this.faqItems=e.data}).catch(e=>{console.error("獲取FAQ資料失敗:",e)})},parseLinks(e){return console.log(e),JSON.parse(e)},parseAnswer(e){return console.log(e),e.replace(/\\n/g,`
`)},editFaq(e){console.log(e),this.$router.push(`/edit_faq/${e}`)},deleteFaq(e){console.log(e)},deleteLink(e,s){console.log(e,s),confirm("確定要刪除此連結嗎？")&&(console.log("刪除"),c.delete(`https://members-backend.alearn13994229.workers.dev/delete/faq/${e}/link/${s}`).then(()=>{window.alert("刪除成功"),console.log("刪除成功"),this.fetchFaq()}).catch(o=>{window.alert("刪除失敗"),console.error("刪除失敗:",o)}))}}}),q={class:"faq-container"},F={class:"ui container"},_={class:"ui celled table"},w={class:"answer-cell"},y={class:"answer-cell"},v={key:0,class:"ui bulleted list"},$=["href"],I=["onClick"],C=["onClick"];function L(e,s,o,V,A,N){return a(),r("div",q,[t("div",F,[t("table",_,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"類別"),t("th",null,"問題"),t("th",null,"回答"),t("th",null,"相關連結"),t("th",null,"操作")])],-1)),t("tbody",null,[(a(!0),r(u,null,h(e.sortedFaqItems,n=>(a(),r("tr",{key:n.id},[t("td",null,i(n.category),1),t("td",null,i(n.question),1),t("td",w,i(e.parseAnswer(n.answer)),1),t("td",y,[n.links&&e.parseLinks(n.links).length>0?(a(),r("div",v,[(a(!0),r(u,null,h(e.parseLinks(n.links),l=>(a(),r("div",{class:"item",key:l.h},[t("a",{href:l.h,target:"_blank",rel:"noopener noreferrer"},i(l.t),9,$),s[1]||(s[1]=t("br",null,null,-1)),t("button",{class:"ui button mini circular red icon",type:"button",onClick:B=>e.deleteLink(n.id,l.h)},s[0]||(s[0]=[t("i",{class:"trash icon"},null,-1),p("刪除")]),8,I)]))),128))])):k("",!0)]),t("td",null,[t("button",{class:"ui button primary",type:"button",onClick:l=>e.editFaq(n.id)},s[2]||(s[2]=[t("i",{class:"pencil icon"},null,-1),p("編輯")]),8,C)])]))),128))])])])])}const Q=b(m,[["render",L],["__scopeId","data-v-d98ef36d"]]);export{Q as default};
