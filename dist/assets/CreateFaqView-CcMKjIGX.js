import{d as q,r as l,o as v,a as d,u as b,c as u,b as a,h as g,w as r,v as w,i as I,j as p,f,_ as k}from"./index-CiOIlwTs.js";const y=q({name:"CreateFaqView",setup(){const t=b(),e=l({id:"",category:"",question:"",answer:""}),i=l(!1);return v(async()=>{try{const s=t.params.id,n=(await d.get("https://members-backend.alearn13994229.workers.dev/api/Faq")).data;console.log(s),console.log(n);const o=n.find(c=>c.id===parseInt(s));o&&(e.value=o)}catch(s){console.error("獲取FAQ資料失敗:",s)}}),{faqItem:e,uploading:i}},methods:{async createFaq(){if(this.faqItem.category===""){alert("請選擇類別");return}if(this.faqItem.question===""){alert("請輸入問題");return}if(this.faqItem.answer===""){alert("請輸入回答");return}try{this.uploading=!0,await d.post("https://members-backend.alearn13994229.workers.dev/create/faq",{category:this.faqItem.category,question:this.faqItem.question,answer:this.faqItem.answer,links:"[]"}).then(()=>{this.uploading=!1,alert("上傳成功"),this.goBack()}).catch(t=>{this.uploading=!1,console.error("新增FAQ失敗:",t),alert("上傳失敗")})}catch(t){this.uploading=!1,console.error("新增FAQ失敗:",t),alert("上傳失敗")}},goBack(){this.$router.push("/faq")}}}),h={class:"faq-container"},F={class:"ui container"},V={key:0,class:"ui dimmer"},B={class:"ui form"},C={class:"field"},$={class:"field"},A={class:"field"};function M(t,e,i,s,m,n){return f(),u("div",h,[a("div",F,[t.uploading?(f(),u("div",V,e[5]||(e[5]=[a("div",{class:"ui loader"},null,-1)]))):g("",!0),a("div",B,[a("div",C,[e[7]||(e[7]=a("label",null,"類別：",-1)),r(a("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.faqItem.category=o)},e[6]||(e[6]=[I('<option value="" data-v-dc02b558>請選擇類別</option><option value="起步" data-v-dc02b558>起步</option><option value="計畫" data-v-dc02b558>計畫</option><option value="支持" data-v-dc02b558>支持</option><option value="資源" data-v-dc02b558>資源</option><option value="其他" data-v-dc02b558>其他</option>',6)]),512),[[w,t.faqItem.category]])]),a("div",$,[e[8]||(e[8]=a("label",null,"問題：",-1)),r(a("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.faqItem.question=o),rows:"3"},null,512),[[p,t.faqItem.question]])]),a("div",A,[e[9]||(e[9]=a("label",null,"回答",-1)),r(a("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.faqItem.answer=o),rows:"20"},null,512),[[p,t.faqItem.answer]])]),a("button",{class:"ui button primary",type:"button",onClick:e[3]||(e[3]=(...o)=>t.createFaq&&t.createFaq(...o))},"上傳"),a("button",{class:"ui button",onClick:e[4]||(e[4]=(...o)=>t.goBack&&t.goBack(...o))},"返回")])])])}const Q=k(y,[["render",M],["__scopeId","data-v-dc02b558"]]);export{Q as default};
