const d={methods:{toList(e){return!e||typeof e!="object"?[]:Object.values(e)},part(e){return String(e).substring(0,100)},toAge(e){return new Date().getFullYear()-parseInt(e)},highlight(e,r){if(!e)return"";if(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/&lt;\s*br\/?\s*&gt;/g,"<br/>"),!r||r.startsWith("$"))return e;const l=r.split(/\s+/g);for(const h of l)e=e.replace(new RegExp(h,"gi"),'<span class="highlightedText">$&</span>');return e},getIcon(e){return e&&e.photoURL?e.photoURL:e&&e.name?`https://www.moedict.tw/${e.name}.png`:"https://www.moedict.tw/unknown.png"},countDateDiff(e){return e?new Date(e).toLocaleDateString():""},makeHref(e){if(!e)return"";let r=String(e);return!r.startsWith("http://")&&!r.startsWith("https://")&&(r="http://"+r),r.replace("https://","")},badAge(e){if(!e)return!1;const l=new Date().getFullYear()-parseInt(e);return isNaN(l)},isValid(e){return e&&e.name&&e.share&&e.learner_habit&&e.note&&e.address&&e.latlngColumn!=="undefined,undefined"&&e.latlngColumn!=="36.778261,-119.4179324"&&e.connect_me},asValid(e){return e&&e.name&&e.note&&e.note.length>=20&&e.address&&e.latlngColumn!=="undefined,undefined"&&e.latlngColumn!=="36.778261,-119.4179324"},searchBy(e,r){const h=Object.keys(e).map(n=>e[n]);if(!h)return[];r||(r="");const u=r.split(/[\s&]+/g);let s=h;for(const n of u){let i,a;[i,a]=n.split(/[~-]/),n.match(/(\d+)[~-](\d+)/)?s=s.filter(t=>(this.toAge(t.learner_birth)<=Number(a)&&this.toAge(t.learner_birth))>=i||this.toAge(t.child_birth)<=Number(a)&&this.toAge(t.child_birth)>=i||this.toAge(t.child_birth2)<=Number(a)&&this.toAge(t.child_birth2)>=i):n.match(/(\d+)\+/)?(i=n.split("+")[0],s=s.filter(t=>this.toAge(t.learner_birth)>=Number(i)||this.toAge(t.child_birth)>=Number(i)||this.toAge(t.child_birth2)>=Number(i))):n.match(/(\d+)-/)?(a=n.split("-")[0],s=s.filter(t=>this.toAge(t.learner_birth)<=Number(a)||this.toAge(t.child_birth)<=Number(a)||this.toAge(t.child_birth2)<=Number(a))):s=s.filter(t=>t.name?(t.name+t.address+t.note+t.freetime+t.learner_habit+t.share+t.ask+t.id).includes(n):!1)}return s.sort((n,i)=>(n.lastUpdate||(n.lastUpdate=0),i.lastUpdate||(i.lastUpdate=0),i.lastUpdate-n.lastUpdate)),s}}};export{d as m};
