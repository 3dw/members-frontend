import{d as f,r as d,b as q,e as u,u as b,c as n,a as s,i as k,t as p,h as g,w as v,g as w,o as r,_ as y}from"./index-lCx26TXw.js";const h=f({name:"EditFaqView",props:{uid:{type:String,required:!0}},setup(){const e=b(),t=d({id:"",category:"",question:"",answer:""}),l=d(!1);return q(async()=>{try{const a=e.params.id,i=(await u.get("https://members-backend.alearn13994229.workers.dev/api/Faq")).data;console.log(a),console.log(i);const o=i.find(m=>m.id===parseInt(a));o&&(t.value=o)}catch(a){console.error("獲取FAQ資料失敗:",a)}}),{faqItem:t,updating:l}},methods:{toggleLogin(){this.$emit("toggleLogin")},parseAnswer(e){return console.log(e),e.replace(/\\n/g,`
`)},async updateFaq(){this.updating=!0;try{await u.post(`https://members-backend.alearn13994229.workers.dev/update/faq/${this.faqItem.id}`,{content:this.parseAnswer(this.faqItem.answer)}).then(()=>{alert("更新成功"),this.goBack()}).catch(e=>{console.error("更新FAQ失敗:",e),alert("更新失敗")})}catch(e){console.error("更新FAQ失敗:",e),alert("更新失敗")}},goBack(){this.$router.push("/faq")}}}),F={class:"faq-container"},I={key:0,class:"ui dimmer"},B={class:"ui container"},$={key:0,class:"ui form"},V={class:"field"},A={class:"field"},C={class:"field"};function L(e,t,l,a,c,i){return r(),n("div",F,[e.updating?(r(),n("div",I,t[4]||(t[4]=[s("div",{class:"ui loader"},null,-1)]))):k("",!0),s("div",B,[e.uid?(r(),n("div",$,[s("div",V,[s("label",null,"類別："+p(e.faqItem.category),1)]),s("div",A,[t[5]||(t[5]=s("label",null,"問題：",-1)),g(p(e.faqItem.question),1)]),s("div",C,[t[6]||(t[6]=s("label",null,"回答",-1)),v(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.faqItem.answer=o),rows:"20"},null,512),[[w,e.faqItem.answer]])]),s("button",{class:"ui button primary",type:"button",onClick:t[1]||(t[1]=(...o)=>e.updateFaq&&e.updateFaq(...o))},"儲存"),s("button",{class:"ui button",onClick:t[2]||(t[2]=(...o)=>e.goBack&&e.goBack(...o))},"返回")])):(r(),n("button",{key:1,class:"ui button orange",type:"button",onClick:t[3]||(t[3]=(...o)=>e.toggleLogin&&e.toggleLogin(...o))},t[7]||(t[7]=[s("i",{class:"user icon"},null,-1),g("請先登人以編輯問答")])))])])}const N=y(h,[["render",L],["__scopeId","data-v-b1fd20b3"]]);export{N as default};
