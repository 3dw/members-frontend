import{_ as o,c as e,h as r,b as l,a as t,o as s}from"./index-BpPPOl2i.js";const c={data(){return{status:"pending",merchantTradeNo:"",pollingInterval:null}},mounted(){this.merchantTradeNo=this.$route.params.merchantTradeNo||"",this.merchantTradeNo&&this.startPolling(this.merchantTradeNo)},methods:{async checkDonationStatus(a){try{const i=await(await fetch(`https://members-backend.alearn13994229.workers.dev/check_donation_status/${a}`)).json();i&&i.status&&(this.status=i.status)}catch(u){console.error("檢查捐款狀態時發生錯誤:",u)}},startPolling(a){this.checkDonationStatus(a),this.pollingInterval=setInterval(()=>{this.checkDonationStatus(a)},1e4),setTimeout(()=>{this.pollingInterval&&clearInterval(this.pollingInterval)},5*60*1e3)}},beforeUnmount(){this.pollingInterval&&clearInterval(this.pollingInterval)}},B={class:"ui segment container"},d={key:0,class:"ui segment"},F={key:1,class:"ui segment"},m={key:2,class:"ui segment"},h={key:3,class:"ui segment"};function E(a,u,i,C,n,A){return s(),e("div",B,[n.status==="success"?(s(),e("div",d,u[0]||(u[0]=[r('<h2 class="main-title" data-v-624f24c1>捐款完成，謝謝您的愛心</h2><h3 data-v-624f24c1>請將以下資訊寄至本會行政室： <a href="mailto:alearn13994229@gmail.com" data-v-624f24c1>Email：alearn13994229@gmail.com</a></h3><ul data-v-624f24c1><li data-v-624f24c1>捐款人姓名</li><li data-v-624f24c1>聯絡電話</li><li data-v-624f24c1>通訊地址</li><li data-v-624f24c1>捐款金額</li><li data-v-624f24c1>匯款帳號後五碼</li><li data-v-624f24c1>指定支持的專案（可略）</li></ul><p data-v-624f24c1>本會將開立捐款收據並寄回給您，可供節稅使用。</p>',4)]))):l("",!0),n.status==="failed"?(s(),e("div",F,u[1]||(u[1]=[t("h2",{class:"main-title"},"捐款失敗",-1),t("p",null,"很抱歉，您的捐款處理失敗。請嘗試其他捐款方式或稍後再試。",-1)]))):l("",!0),n.status==="simulated"?(s(),e("div",m,u[2]||(u[2]=[t("h2",{class:"main-title"},"模擬捐款完成",-1),t("p",null,"這是一筆測試性質的捐款，並未實際進行交易。",-1)]))):l("",!0),n.status==="pending"?(s(),e("div",h,u[3]||(u[3]=[t("h2",{class:"main-title"},"處理中",-1),t("p",null,"您的捐款正在處理中，請稍候...",-1)]))):l("",!0)])}const v=o(c,[["render",E],["__scopeId","data-v-624f24c1"]]);export{v as default};
