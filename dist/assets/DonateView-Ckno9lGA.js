import{g as A,d as B,o as b}from"./index.esm2017-Ca9oR0n-.js";import{a as E,b as D,_ as p,c as o,d as u,e as r,F as y,r as f,w as k,f as c,v,g as _,h as a,o as n,n as g,t as h,i as w,j as x}from"./index-BIpr9N3Z.js";const V={data(){return{selectedAmount:"500",customAmount:500,mode:"donate-by-card",modes:["donate-by-card","donate-by-qrcode","donate-by-bank-transfer","donate-by-code"],unsubscribe:()=>{}}},methods:{parse(l){if(l==="donate-by-card")return"信用卡小額捐贈";if(l==="donate-by-bank-transfer")return"銀行匯款捐贈";if(l==="donate-by-qrcode")return"QR Code掃碼捐贈";if(l==="donate-by-code")return"愛心碼捐贈"},clearCustomAmount(){this.selectedAmount!=="custom"&&(this.customAmount=500)},submitDonation(){const l=this.selectedAmount==="custom"?this.customAmount:parseInt(this.selectedAmount);if(isNaN(l)||l<500){alert("請輸入有效的捐贈金額（最少500元）");return}const e={amount:l};console.log("準備送出捐款請求：",e),E.post("https://members-backend.alearn13994229.workers.dev/donate",e).then(i=>{if(i.status!==200)throw new Error("伺服器回應異常");return i.data}).then(i=>{window.open(i,"_blank")}).catch(i=>{console.error("捐款處理錯誤:",i),alert("捐贈失敗，請改為其他方式捐贈")})},listenToOrderStatus(l){const e=A(D),i=B(e,"donations",l);this.unsubscribe=b(i,F=>{var d,s,C,m;const t=F.data();if(t)switch(t.status){case"completed":alert("捐贈成功，謝謝您的捐贈"),(d=this.unsubscribe)==null||d.call(this);break;case"simulated":alert("此為模擬捐贈，並未實際捐贈"),(s=this.unsubscribe)==null||s.call(this);break;case"pending":console.log("捐贈處理中，請稍後再查詢"),(C=this.unsubscribe)==null||C.call(this);break;case"failed":alert("捐贈失敗，請改為其他方式捐贈"),(m=this.unsubscribe)==null||m.call(this);break}}),setTimeout(()=>{var F;(F=this.unsubscribe)==null||F.call(this)},5*60*1e3)}},beforeUnmount(){var l;(l=this.unsubscribe)==null||l.call(this)}},q={class:"ui segment container"},N={class:"ui header"},S={key:0},R={key:1},T={key:2},M={key:3},Q={class:"ui vertical buttons"},U=["onClick"],I={class:"ui form"},j={class:"ui two stackable fields"},z={class:"compact field"},L={key:0,class:"field"},O={key:1,class:"ui divider"},G={key:2,class:"ui segment"},H={key:3,class:"ui segment"},J={key:4,class:"ui segment"},K={key:5,class:"ui divider"},P={key:6,class:"ui segment"};function W(l,e,i,F,t,d){return n(),o("div",q,[u("h2",N,[e[4]||(e[4]=u("span",null,[u("i",{class:"dollar icon"})],-1)),t.mode==="donate-by-card"?(n(),o("span",S,"信用卡小額捐贈")):t.mode==="donate-by-qrcode"?(n(),o("span",R,"QR Code掃碼捐贈")):t.mode==="donate-by-bank-transfer"?(n(),o("span",T,"銀行匯款捐贈")):t.mode==="donate-by-code"?(n(),o("span",M,"愛心碼捐贈")):r("",!0),e[5]||(e[5]=u("span",null,"   ",-1)),u("div",Q,[(n(!0),o(y,null,f(t.modes,s=>(n(),o("button",{class:g(["ui basic green large button",{active:t.mode===s}]),key:s,onClick:C=>t.mode=s},h(d.parse(s)),11,U))),128))])]),t.mode==="donate-by-card"?(n(),o("form",{key:0,onSubmit:e[3]||(e[3]=k((...s)=>d.submitDonation&&d.submitDonation(...s),["prevent"]))},[u("div",I,[u("div",j,[u("div",z,[e[7]||(e[7]=u("label",null,"選擇捐贈金額",-1)),c(u("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.selectedAmount=s),onChange:e[1]||(e[1]=(...s)=>d.clearCustomAmount&&d.clearCustomAmount(...s))},e[6]||(e[6]=[u("option",{value:"500"},"新台幣500元",-1),u("option",{value:"1000"},"新台幣1000元",-1),u("option",{value:"2000"},"新台幣2000元",-1),u("option",{value:"custom"},"自訂金額",-1)]),544),[[v,t.selectedAmount]])]),t.selectedAmount==="custom"?(n(),o("div",L,[e[8]||(e[8]=u("label",null,"自訂金額：新台幣",-1)),c(u("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=s=>t.customAmount=s),min:"500",placeholder:"輸入金額"},null,512),[[_,t.customAmount,void 0,{number:!0}]])])):r("",!0)]),e[9]||(e[9]=u("button",{type:"submit",class:"ui basic green large button"},[u("i",{class:"dollar icon"}),a(" 捐贈 ")],-1))])],32)):r("",!0),t.mode==="donate-by-bank-transfer"?(n(),o("div",O)):r("",!0),t.mode==="donate-by-bank-transfer"?(n(),o("div",G,e[10]||(e[10]=[u("h3",null,[a("本會銀行帳戶： "),u("br"),a(" 台北富邦 士林分行（012） "),u("br"),a(" 帳號：30012-0000601 "),u("br"),a(" 戶名：社團法人中華民國自主學習促進會 ")],-1)]))):r("",!0),t.mode==="donate-by-qrcode"?(n(),o("div",H,e[11]||(e[11]=[u("img",{id:"#donate-qrcode",src:w,alt:"線上捐款"},null,-1),u("p",null,"請掃描上方 QR Code",-1)]))):r("",!0),t.mode==="donate-by-code"?(n(),o("div",J,e[12]||(e[12]=[u("h3",null,"以愛心碼「9806」捐助本會",-1),u("p",null,"本會是一個非營利組織，需要您的支持。",-1),u("p",null,"愛心碼取為「9806」，是因為最初成立的契機，在於1998~2006年的「台北市自主學習（中學六年一貫）實驗計畫」，本會第一代會員多是計畫中的親師生及關注計畫的學者賢達，別具意義。",-1),u("p",null,"邀請並歡迎大家未來在開立電子發票的商家購物時，可主動向店員要求使用愛心碼，說出捐贈碼9806，或出示條碼即可。發票若中獎，將會自動捐入本會！",-1),u("img",{id:"donate",src:x,alt:"愛心碼"},null,-1)]))):r("",!0),t.mode!=="donate-by-code"?(n(),o("div",K)):r("",!0),t.mode!=="donate-by-code"?(n(),o("div",P,e[13]||(e[13]=[u("h3",null,[a("完成捐款後，請將以下資訊寄至本會行政室： "),u("a",{href:"mailto:alearn13994229@gmail.com"},"Email：alearn13994229@gmail.com")],-1),u("ul",null,[u("li",null,"捐款人姓名"),u("li",null,"聯絡電話"),u("li",null,"通訊地址"),u("li",null,"捐款金額"),u("li",null,"匯款帳號後五碼"),u("li",null,"指定支持的專案（可略）")],-1),u("p",null,"本會將開立捐款收據並寄回給您，可供節稅使用。",-1)]))):r("",!0)])}const Z=p(V,[["render",W],["__scopeId","data-v-a89506a7"]]);export{Z as default};
