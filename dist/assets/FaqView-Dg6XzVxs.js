import{d as p,r as f,o as b,a as i,c as o,b as t,F as d,e as u,f as l,t as a,g as h,h as k,_ as q}from"./index-Bt0KTA5k.js";const g=p({name:"FaqView",setup(){const e=f([]);return b(async()=>{try{const s=await i.get("https://members-backend.alearn13994229.workers.dev/api/Faq");e.value=s.data}catch(s){console.error("獲取FAQ資料失敗:",s)}}),{faqItems:e}},methods:{fetchFaq(){this.faqItems=[],i.get("https://members-backend.alearn13994229.workers.dev/api/Faq").then(e=>{this.faqItems=e.data}).catch(e=>{console.error("獲取FAQ資料失敗:",e)})},parseLinks(e){return console.log(e),JSON.parse(e)},parseAnswer(e){return console.log(e),e.replace(/\\n/g,`
`)},editFaq(e){console.log(e),this.$router.push(`/edit_faq/${e}`)},deleteFaq(e){console.log(e)},deleteLink(e,s){console.log(e,s),confirm("確定要刪除此連結嗎？")&&(console.log("刪除"),i.delete(`https://members-backend.alearn13994229.workers.dev/delete/faq/${e}/link/${s}`).then(()=>{window.alert("刪除成功"),console.log("刪除成功"),this.fetchFaq()}).catch(c=>{window.alert("刪除失敗"),console.error("刪除失敗:",c)}))}}}),m={class:"faq-container"},_={class:"ui container"},w={class:"ui celled table"},F={class:"answer-cell"},v={class:"answer-cell"},y={key:0,class:"ui bulleted list"},$=["href"],C=["onClick"],L=["onClick"];function I(e,s,c,V,A,N){return l(),o("div",m,[t("div",_,[t("table",w,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"類別"),t("th",null,"問題"),t("th",null,"回答"),t("th",null,"相關連結"),t("th",null,"操作")])],-1)),t("tbody",null,[(l(!0),o(d,null,u(e.faqItems,n=>(l(),o("tr",{key:n.id},[t("td",null,a(n.category),1),t("td",null,a(n.question),1),t("td",F,a(e.parseAnswer(n.answer)),1),t("td",v,[n.links&&e.parseLinks(n.links).length>0?(l(),o("div",y,[(l(!0),o(d,null,u(e.parseLinks(n.links),r=>(l(),o("div",{class:"item",key:r.h},[t("a",{href:r.h,target:"_blank",rel:"noopener noreferrer"},a(r.t),9,$),s[1]||(s[1]=t("br",null,null,-1)),t("button",{class:"ui button mini circular red icon",type:"button",onClick:B=>e.deleteLink(n.id,r.h)},s[0]||(s[0]=[t("i",{class:"trash icon"},null,-1),h("刪除")]),8,C)]))),128))])):k("",!0)]),t("td",null,[t("button",{class:"ui button primary",type:"button",onClick:r=>e.editFaq(n.id)},s[2]||(s[2]=[t("i",{class:"pencil icon"},null,-1),h("編輯")]),8,L)])]))),128))])])])])}const S=q(g,[["render",I],["__scopeId","data-v-6e74b8bc"]]);export{S as default};
