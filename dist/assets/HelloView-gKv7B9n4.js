import{_ as S,r,c as C,o as F,a as G,e as a,f as s,w as p,v as f,F as b,h,t as v,g as U,s as B,b as k,i as l,a7 as H}from"./index-CmjaspVt.js";const M={class:"hello-view"},T={key:0},A={class:"login-form"},I={class:"avatar-selection"},L=["value"],N={class:"avatar"},R=["disabled"],E={key:1},O={class:"welcome-message"},P={key:0,class:"greeting-form"},j=["disabled"],q={key:1},z={class:"pond"},J={key:0,class:"greeting-item"},K={class:"user-info"},Q={class:"avatar"},W={class:"username"},X={class:"message"},Y={__name:"HelloView",setup(Z){const c=r(!1),d=r(""),m=r(""),n=r(""),u=r(""),i=r([]),y=r(["😊","🚀","🌟","☀️","💧","🌳"]),g=C(()=>{if(!c.value)return!1;const o=new Date().toDateString();return i.value.some(e=>e.username===m.value&&e.dateString===o)}),w=()=>{d.value&&n.value&&(m.value=d.value,c.value=!0)},V=()=>{c.value=!1,m.value="",d.value="",n.value="",u.value=""},x=()=>{if(!u.value||!c.value||g.value)return;const o=new Date,e={username:m.value,avatar:n.value,message:u.value,timestamp:o.getTime(),dateString:o.toDateString()};i.value.push(e),u.value="",B(k,i.value).then(()=>{console.log("留言已寫入 Firebase")}).catch(t=>{console.error("寫入 Firebase 時發生錯誤:",t)})};return F(()=>{G(k,o=>{o.exists()?i.value=o.val():i.value=[]})}),(o,e)=>(l(),a("div",M,[c.value?(l(),a("div",E,[s("div",O,[s("h2",null,"Hi, "+v(m.value)+" ("+v(n.value)+")!",1),s("button",{onClick:V},"離開池塘")]),g.value?(l(),a("p",q,"你今天已經打過招呼了！")):(l(),a("div",P,[p(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),placeholder:"今天想說些什麼？"},null,512),[[f,u.value,void 0,{trim:!0}]]),s("button",{onClick:x,disabled:!u.value},"向大家打招呼！",8,j)])),e[7]||(e[7]=s("h3",{class:"pond-title"},"今日池塘訊息",-1)),s("div",z,[i.value.length===0?(l(),a("div",J,e[6]||(e[6]=[s("p",null,"今天池塘很安靜... 快來打聲招呼吧！",-1)]))):U("",!0),(l(!0),a(b,null,h(i.value,(t,_)=>(l(),a("div",{class:"greeting-item",key:_},[s("div",K,[s("span",Q,v(t.avatar),1),s("span",W,v(t.username)+":",1)]),s("p",X,v(t.message),1)]))),128))])])):(l(),a("div",T,[e[5]||(e[5]=s("h2",null,"加入池塘對話！",-1)),s("div",A,[e[3]||(e[3]=s("label",{for:"username"},"你的名字：",-1)),p(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),placeholder:"輸入你的暱稱"},null,512),[[f,d.value,void 0,{trim:!0}]]),e[4]||(e[4]=s("label",null,"頭像選擇：",-1)),s("div",I,[(l(!0),a(b,null,h(y.value,(t,_)=>(l(),a("label",{key:_},[p(s("input",{type:"radio",name:"avatar",value:t,"onUpdate:modelValue":e[1]||(e[1]=D=>n.value=D)},null,8,L),[[H,n.value]]),s("span",N,v(t),1)]))),128))]),s("button",{onClick:w,disabled:!d.value||!n.value},"進入池塘",8,R)])]))]))}},ee=S(Y,[["__scopeId","data-v-5c70f05d"]]);export{ee as default};
